# Observer(옵저버) 패턴 

옵저버 패턴은 동작 디자인 패턴 중 하나 입니다. **객체의 상태의 변화가 생기면 어떤 동작을 수행하고 싶을 때 유용합니다**. 옵저버 패턴

## 목적

**일 대 다 의존 관게예서 일(One)쪽의 객체의 상태가 변경이 되면, 다 쪽 객체들이 알게 되고, 자동적으로 업데이트 됩니다.**

**Subject는 옵저버리스트를 가지고 있어**, 객체의 상태의 변화가 있으면 알려줍니다. 그래서 Subject가 옵저버를 등록하거나 등록을 취소할 수 있는 메소드를 제공해줘야 합니다. Subject는 변화가 일어나면 모든 옵저버에게 통지하는 메소드가 있으며, 옵저버에게 통지되고 있는동안 업데이트를 보내주거나, 업데이트를 가져오기 위한 메소드를 제공해줄 수 있습니다. 

<u>옵저버는</u> **감시할 객체를 설정하기 위한 메소드와 객체의 변화가 생겼을 때 Subject가 호출할 메소드를**  갖고 있어야 합니다.

자바는 내장된 java.util.Observable 클래스와 java.utilObserver interface가 있습니다. 그러나 이건 구현이 굉장히 간단하고 자바는 다중상속을 지원하지 않기 때문에 Observer 패턴을 구현하기 위해 상속을 사용하는건 낭비입니다.

Java Message Service(JMS)는 Mediator 패턴과 함께 옵저버 패턴을 같이 사용함으로써 애플리케이션이 다른 애플리케이션으로 데이터를 보내거나 받을 수 있습니다.

MVC 프레임워크 또한 옵저버 패턴을 사용하는데, Model이 Subject이고 View가 옵저버 입니다.



## 적용 포인트



## 옵저버 패턴 자바 예제

간단하게 토픽과 토픽을 등록하는 옵저버를 만들어 보겠습니다. 새로운 메세지가 토픽에 등록되면 등록된 모든 옵저버는 그 사실을 알아차리고, 메세지를 읽습니다.

Subject의 기본 요구 사항에 맞게 인터페이스를 설계해보겠습니다.

Subject.java





Observer.java



MyTopic.java

옵저버를 등록하거나, 등록해제하는 메소드의 구현은 간단합니다. 추가로 만든 postMessage() 메소드는 클라이언트가 토픽으로 메세지를 보내기위해 사용됩니다. 여기서 boolean 변수가 토픽의 변화를 게속 감지하고 옵저버에게 통지를 해줍니다. 

또한 notifyObservers() 메소드 안에는 동기화가 사용되어 메세지가 토픽에게 전송되기전에 옵저버들을 보장해준다는~ 말인데~ 흠흠

다음은 옵저버 구현~



**MyTopicSubscriber.java**

update() 메소드가 메세지를 가져오기 위해 Subject의 getUpdate() 메소드를 호출 합니다. 



다음은 테스트입니다.~

ObserverPatternTests

